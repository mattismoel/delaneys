<script lang="ts">
  import type { Attachment } from "svelte/attachments";
  import type { SVGAttributes } from "svelte/elements";

  type Variant = "light" | "dark";

  type Props = SVGAttributes<SVGElement> & {
    trace?: boolean;
    variant?: Variant;
  };

  const variantClasses: Record<Variant, string> = {
    light: "stroke-text-light",
    dark: "stroke-text-dark",
  };

  let { variant = "dark", trace = true, ...rest }: Props = $props();

  const tracer: Attachment<SVGPathElement> = (element) => {
    element.style.strokeDasharray = element.getTotalLength().toString();
    element.style.strokeDashoffset = element.getTotalLength().toString();
  };
</script>

<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 476.7 124.76"
  {...rest}
  class={["-translate-x-[12%]", rest.class]}
>
  <g id="clip-paths">
    <clipPath id="cp-1">
      <path
        d="M48.66,32.12c1.89,11.45,6.53,22.38,11.04,33.02,2.97,6.26,5.71,13.04,9.5,18.73.29.43.74.76.5.69-.44-.12-.96-.07-1.35.17-.2.13-.08.14.08,0,.32-.25.8-.75,1.23-1.26,1.42-1.68,2.85-3.46,4.5-4.99.51-.47,1.31-.43,1.78.08.28.31.38.73.3,1.12-.33,1.51-.78,2.95-1.3,4.4-6.99,18.9-19.2-8.86-21.66-16.34-3.1-8.55-5.59-17.32-6.78-26.36-.36-3.03-.61-6.1-.34-9.22.06-.69.67-1.2,1.35-1.14.61.05,1.07.53,1.14,1.11h0Z"
      />
    </clipPath>
    <clipPath id="cp-2">
      <path
        d="M3.96,3.59C27.36,0,53.23,1.62,74.06,14.37c14.3,8.56,25.88,24.32,24.07,41.77-1.15,21.29-15.77,48.4-38.52,52.11-3.24.36-6.43.19-9.66-.24-2.5-.46-5.76-.91-7.05-3.7-.8-1.99.35-4.14,2.09-4.96,4.84-2.18,10.19-1.61,15.26-1.78,13.28-.19,33.39-1.53,46.94-2.29,3.93-.22,7.86-.45,11.82-.61,3.63-.27,7.4.21,10.92-.96,9.42-2.92,19.9-11.06,17.8-22-1.02-6.74-4.85-13.64-10.55-17.41-8.95-6.21-20.69.67-25.13,9.25-3.46,6.4-1.37,13.29,2.44,19.11,7.82,11.98,22.73,20.31,37.16,17.77,10.79-1.79,20.97-7.91,27.97-16.36,7.12-8.61,10.66-19.58,10.9-30.76.45-11.02-3.74-22.14-10.03-31.17-2.36-3.13-5.22-7.02-8.73-8.47.01,0,0,0,.17,0,.24-.02.46-.1.57-.17.22-.14.11-.1,0,.08-2.37,4.63-2.64,10.26-3.24,15.54-.43,5.64-.75,11.52-.43,17.16.74,9.4,3.32,18.69,7,27.39,3.68,8.27,10.61,21.64,20.47,22.4,5.18-.13,11.25-2.33,15.48-5.31.05-.02.03-.1-.21.34-.07.14-.15.33-.2.62-.11.75-.05.72.05,1.16-7.21-6.93-9.83-14.79-8.91-25.33.56-10.31,6.52-17.36,16.79-19.1,4.27-.82,8.44-.84,12.53-.64,1.79.09,3.17,1.61,3.08,3.39-.08,1.74-1.53,3.1-3.26,3.09-3.44.02-6.86.21-10.07.83-9.31,1.7-12.66,6.2-12.42,15.55-.16,7.65,3.28,16.2,9.65,20.53,4.76,3.18,11.46,3.17,15.48-1.33,3.96-4.24,5.63-11.19,4.15-16.87-1.16-3.86-4.28-8.02-8.3-9.1.36,0,1.2-.19,1.55-.51.7-.55.75-.92.8-1.01-.03,3.2,1.5,7.6,3.13,10.98,3.68,7.89,11.82,16.56,21.16,13.23,4-1.53,8.46-4.8,10.96-8.36.17-.27.29-.5.32-.58-.03.1-.06.31-.04.36.01-1.88-.94-4.2-2.38-5.2.68.25,1.55.29,2.55-.45.86-.59,1.32-2.01.99-2.81,2.65,3.07,5.35,6.37,7.54,9.7,3.02,4.22,5.31,8.95,8.56,12.77.11.15.33.15-.32-.08-.43-.12-.91-.09-1.26.13-.23.14-.23.22-.18.12,1.12-2.64.84-6.61.43-9.6-.5-3.18-1.57-6.25-2.95-9.44-1.09-2.64-2.56-5.37-2.94-8.53-.8-5.93,6.42-8.39,10.73-5.98,2.36,1.19,3.82,2.77,5.14,4.25,4.76,5.7,8.05,11.7,13.05,16.83,4.51,4.77,10.08,8.32,16.55,9.44,2.13.32,4.53.69,6.66.32,6.14-1.8,12.4-8.98,12.71-15.37.13-8.73-4.17-19.56-14.4-18.84-5.43.57-9.59,5.5-11.09,10.54-2.51,9.14,3.2,18.94,11.37,23.13,8.38,4.16,19.74,5.17,28.42,1.35,10.7-4.77,16.36-16.13,14.34-27.59-.24-2.02-.77-4.34-1.8-5.77-.03-.09-.1.06.65.24.23.04.51.04.75-.01.28-.05.51-.15.68-.24.32-.2.39-.31.41-.33-1.16,2.55-1.16,5.68-1.31,8.55-.26,4.53,1.71,9.15,4.79,12.42,6.93,7.46,17.11,3.8,21.55-4.93.98-1.93,1.6-3.96,1.59-6.06-.38-2.2-1.08-5.12-2.09-7.09-1.03-1.72-2.03-3.61-3.28-5.14-.07-.09-.17-.17-.06-.08.1.05.1.16.84.39.41.1,1.17.2,2.05-.27.78-.42,1.13-1.11,1.23-1.34.23-.61.17-.69.19-.79,0-.05,0-.06,0-.02.01.15.08.52.16.87,3.34,11.74,9.84,22.39,15.84,32.98,5.27,9,11.2,17.82,18.01,25.67,2.35,2.55,5.04,5.01,7.56,7.28.32.29.35.78.06,1.1-.21.23-.54.31-.82.21-3.5-1.15-6.88-2.84-9.92-5.14-8.77-6.94-14.36-16.68-20.08-26.05-3.67-6.22-7.19-12.51-10.43-19.03-2.69-5.62-5.34-11.12-6.47-17.36-.09-1.3.07-2.72,1.72-3.73,3.04-1.42,4.78,1.26,6.14,3.21.86,1.16,1.47,2.41,2.22,3.6.77,1.27,1.48,2.97,1.86,4.3.67,2.27,1.38,4.38,1.41,6.88-.28,7.13-4.51,13.56-10.3,17.54-14.34,9.73-30.63-3.98-30.02-19.55.22-4.17.17-8.64,2.64-12.32.56-.88,2.2-1.86,3.47-1.77,1.45.02,2.71.79,3.54,1.7,3.57,4.37,3.6,9.79,3.88,14.96.36,12.06-7.4,23.67-18.37,28.52-10.47,4.66-23.88,3.6-34.05-1.46-10.8-5.47-18.04-18.65-14.62-30.66,3.01-10.65,13.83-18.47,24.85-14.1,10.24,3.91,14.06,15.93,13.42,25.93-1.2,8.22-7.19,15.3-14.55,19.05-3.85,1.98-8.38,1.55-12.54.86-7.76-1.31-14.89-5.75-20.17-11.4-2.64-2.76-4.92-5.73-7.06-8.69-2.22-2.71-7.48-12.06-10.74-11.2.01-.02.09-.06.17-.27.05-.11.1-.29.1-.57.04.69.18,1.31.49,2.19,1.95,5,4.58,10.1,5.37,15.76.75,5.31,1.45,17.1-6.56,16.92-3.54-.59-5.12-4.04-6.92-6.53-1.98-3.09-3.8-6.09-5.77-8.97-1.95-2.88-4.01-5.64-6.27-8.14-.47-.48-1.33-1.52-1.72-2.36-1.48-2.62.02-6.12,3.21-6.11,5.29.31,8.96,8.29,7.98,12.94-.88,2.99-3.27,5.25-5.26,7.15-2.95,2.62-6.21,4.84-10.12,6.32-12.69,4.72-24.42-5.69-29.35-16.55-1.83-3.97-6.36-14.7-1.87-18.15,2.19-1.59,5.36-.28,7.33.8,8.62,4.94,12.08,15.19,9.59,24.6-2.18,10.13-11.28,18.48-22.15,16.16-13.01-2.55-20.17-16.72-19.97-29.02-.13-6.06,1.27-13.15,6.45-17.1,6.36-5.03,14.89-5.59,22.55-5.71,0,0-.18,6.48-.18,6.48-6.59-.26-14.9-.21-19.4,4.75-1.96,2.21-2.85,5.47-3.13,9.04-.41,5.41-.02,10.59,2.78,15.1,1.45,2.71,4.44,4.56,5.75,7.51,1.73,4.95-5.37,7.38-8.64,8.94-9.23,3.83-17.45,4.5-25.27-2.74-11.63-11-17.72-28.61-20.41-44.04-1.32-8.05-.86-16.19-.25-24.28.68-5.58,1.26-17.43,6.51-20.63,8.34-4.13,19.76,14.96,22.39,21.3,8.83,18.87,5.99,42.68-7.3,58.85-13.13,16.1-37.42,24.85-56.62,14.56-14.27-7.21-29.91-25.33-21.38-41.94,6.12-11.89,22.05-19.92,34.08-11.62,9.08,6.2,14.5,17.51,13.4,28.47-1.74,11.31-12.07,18.8-22.26,22.06-4.01,1.36-8.28.97-12.45,1.2-3.89.15-7.8.38-11.72.59-16.01.9-37.06,2.3-53.03,2.34-2.33.13-4.58.19-6.59.95-.02,0,.03.02.29-.28.7-.75.69-2.42-.06-3.09-.08-.09-.14-.13-.16-.14,3.07,1.16,7.38,1.29,10.83.96,12.78-2.14,21.37-13.87,26.5-25.07,2.98-6.8,4.8-14.09,5.37-21.45.7-7.38-.8-14.16-4.63-20.44C69.12,8.91,33.43,3.84,4.25,6.02c-.67.05-1.26-.45-1.32-1.12-.05-.64.41-1.21,1.03-1.31h0Z"
      />
    </clipPath>
    <clipPath id="cp-3">
      <path
        d="M430.84,87.3c-6.26-8.89-8.34-22.93-3.1-32.81,5.11-9.13,16.66-7.91,24.44-3.2,8.53,5.05,14.82,12.32,19.84,20.58,2.41,4.44,4.9,9.08,4.64,14.55-.39,4.31-3.8,8.22-8.25,8.68-8.8.41-16.77-5.64-20.14-13.47-2.69-5.84-3.15-12.24-2.58-18.51.02-.35.32-.62.67-.6.33.02.58.28.6.6,0,0,.32,2.23.32,2.23.67,5.01,1.97,10.07,4.55,14.45,3.01,5.25,8.21,9.31,14.26,9.8,1.61.11,2.73,0,3.8-1.23,2.81-3.4-1.28-9.89-3.21-13.3-4.92-8.54-20.85-25.71-31.43-19.78-7.68,6.14-3.67,22.26-2.26,31.09.27,1.22-1.43,1.95-2.13.93h0Z"
      />
    </clipPath>
    <clipPath id="cp-4">
      <path
        d="M406.03,19.5c6.41,4.74,9.38,13.39,8.12,21.14-.37,2.55-.98,4.99-1.96,7.34-.37.98-1.92.78-2.05-.25-.39-2.48-.51-4.89-.75-7.22-.33-7.07-2.89-12.94-5.4-19.52-.45-1.21,1.04-2.29,2.04-1.5h0Z"
      />
    </clipPath>
  </g>

  <g
    class={["strokes", variantClasses[variant]]}
    fill="none"
    stroke-linecap="round"
    stroke-linejoin="round"
    stroke-width="10px"
  >
    <!-- "D-line" -->
    <path
      class="p1"
      clip-path="url(#cp-1)"
      d="M47.41,32.14c.21,16.33,16.23,55.37,21.74,55.37,1.48,0,3.21-3.52,6.05-8.43"
      {@attach tracer}
    />

    <!-- "DELANEY" -->
    <path
      class="p2"
      clip-path="url(#cp-2)"
      d="M4.11,4.81C61.52-1.91,94.56,25.76,94.56,51.83c0,27.75-19.29,53.55-38.04,53.55-13.46,0-15.57-4.73.5-4.73,19.72,0,56.53-3.07,68.53-3.07,7.58,0,25.5-8.55,25.5-22.72,0-11.99-9.38-26.1-21.68-26.1-9.97,0-22.28,10.14-22.28,21.9,0,13.35,17.4,33.38,39.3,33.38,18.3,0,47.31-16.13,47.31-52.43,0-21.13-16.11-41.09-21.94-41.09-4.35,0-6.3,17.49-6.3,32.35,0,20.59,14.02,56.45,31.03,56.45,7.1,0,18-5.35,18-7.05,0-2.55-8.95-6.02-8.95-20.57,0-12,3.35-21.86,26.07-20.63-25.33,0-25.75,11.31-25.75,20.76s6.64,24.76,20.31,24.92c9,.1,16.05-8.55,16.05-19.95,0-9.81-8.37-16.15-12.12-16.15s3.95,30.02,23,30.02c8.07,0,18.19-9.61,18.19-12.61s-1.35-5.64-2.79-7.09c-2.5-2.5-3.52-.97-1.39,1.35,9.02,9.82,14.37,22.88,17.26,22.89,1.96,0,3.21-2.75,3.21-8.24,0-11.46-6.29-18.41-6.29-23.34,0-1.04,1.17-2.57,3.57-2.57,10.42,0,15.9,31.95,44.12,31.95,7.03,0,17.21-10.29,17.21-18.84,0-10.32-4.75-22.17-17.12-22.17-7.8,0-15.55,8.48-15.55,18.08s7.27,25.8,32.33,25.8c18.36,0,29.17-14.59,29.17-27.34,0-10.52-2.7-14.44-4.31-14.44s-2.95,4.72-2.95,12.25,6.4,18.39,16.82,18.39c9.21,0,17.32-9.83,17.32-18.03,0-1.58-1.48-6.9-2.42-8.54-6.03-10.58-6.01-7.07-2.18,2.86,4.07,10.56,17.34,33.44,23.24,41.29,6.14,8.16,9.62,12.37,18.36,17.41"
      {@attach tracer}
    />

    <!-- "S" -->
    <path
      class="p3"
      clip-path="url(#cp-3)"
      d="M431.91,86.83c-6.64-15.25-6.19-36.01,7.82-36.01,16.01,0,34.07,24.78,34.07,34.66,0,3.82-2.92,6.89-6.42,6.89-8.64,0-21.05-7.42-21.05-29.27"
      {@attach tracer}
    />

    <!-- "S-mark" -->
    <path
      class="p4"
      clip-path="url(#cp-4)"
      d="M405.01,20.25c6.83,9.3,7.65,15.75,6.15,27.6"
      {@attach tracer}
    />
  </g>
</svg>

<style>
  .strokes {
    --heading-duration: 2s;
    /* D-line */
    --duration-fraction-1: 0.1;

    /* "DELAYNE" */
    --duration-fraction-2: 0.6;

    /* "S" */
    --duration-fraction-3: 0.1;

    /* S mark */
    --duration-fraction-4: 0.1;

    --duration-1: calc(var(--heading-duration) * var(--duration-fraction-1));
    --duration-2: calc(var(--heading-duration) * var(--duration-fraction-2));
    --duration-3: calc(var(--heading-duration) * var(--duration-fraction-3));
    --duration-4: calc(var(--heading-duration) * var(--duration-fraction-4));

    --delay-1: 0s;
    --delay-2: calc(var(--heading-duration) * var(--duration-fraction-1));
    --delay-3: calc(
      var(--heading-duration) *
        (var(--duration-fraction-1) + var(--duration-fraction-2))
    );
    --delay-4: calc(
      var(--heading-duration) *
        (
          var(--duration-fraction-1) + var(--duration-fraction-2) +
            var(--duration-fraction-3)
        )
    );
  }

  path {
    opacity: 0;
  }

  .p1 {
    animation: var(--duration-1) ease-out var(--delay-1) dash-move forwards;
  }

  .p2 {
    animation: var(--duration-2) ease-in-out var(--delay-2) dash-move forwards;
  }

  .p3 {
    animation: var(--duration-3) ease-in-out var(--delay-3) dash-move forwards;
  }

  .p4 {
    animation: var(--duration-4) ease-out var(--delay-4) dash-move forwards;
  }

  @keyframes dash-move {
    0% {
      opacity: 100%;
    }
    100% {
      stroke-dashoffset: 0;
      opacity: 100%;
    }
  }
</style>
